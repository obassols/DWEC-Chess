{"ast":null,"code":"import { Board } from '../../Models/Board';\nimport { Player } from '../../Models/Player';\nimport { Team } from '../../Models/Team';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../Services/socket.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/cdk/drag-drop\";\nfunction BoardComponent_table_0_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵelement(1, \"img\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const piece_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", \"/assets/\" + piece_r6.image, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction BoardComponent_table_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 3);\n    i0.ɵɵtemplate(1, BoardComponent_table_0_td_1_Template, 2, 1, \"td\", 2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.board.whiteDeadPieces);\n  }\n}\nfunction BoardComponent_table_1_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵelement(1, \"img\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const piece_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", \"/assets/\" + piece_r8.image, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction BoardComponent_table_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 3);\n    i0.ɵɵtemplate(1, BoardComponent_table_1_td_1_Template, 2, 1, \"td\", 2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.board.blackDeadPieces);\n  }\n}\nfunction BoardComponent_tr_3_td_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"img\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cell_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", \"/assets/\" + (cell_r12.piece == null ? null : cell_r12.piece.image), i0.ɵɵsanitizeUrl);\n  }\n}\nfunction BoardComponent_tr_3_td_1_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 11);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cell_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(cell_r12.label);\n  }\n}\nfunction BoardComponent_tr_3_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 6);\n    i0.ɵɵlistener(\"cdkDropListDropped\", function BoardComponent_tr_3_td_1_Template_td_cdkDropListDropped_0_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.drop($event));\n    });\n    i0.ɵɵtemplate(1, BoardComponent_tr_3_td_1_div_1_Template, 2, 1, \"div\", 7);\n    i0.ɵɵtemplate(2, BoardComponent_tr_3_td_1_p_2_Template, 2, 1, \"p\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const cell_r12 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngClass\", cell_r12.label ? \"disable\" : \"\")(\"cdkDropListData\", cell_r12);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", cell_r12.hasPiece);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", cell_r12.label);\n  }\n}\nfunction BoardComponent_tr_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, BoardComponent_tr_3_td_1_Template, 3, 4, \"td\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", row_r9);\n  }\n}\nfunction BoardComponent_table_4_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵelement(1, \"img\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const piece_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", \"/assets/\" + piece_r21.image, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction BoardComponent_table_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 3);\n    i0.ɵɵtemplate(1, BoardComponent_table_4_td_1_Template, 2, 1, \"td\", 2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.board.blackDeadPieces);\n  }\n}\nfunction BoardComponent_table_5_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵelement(1, \"img\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const piece_r23 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", \"/assets/\" + piece_r23.image, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction BoardComponent_table_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 3);\n    i0.ɵɵtemplate(1, BoardComponent_table_5_td_1_Template, 2, 1, \"td\", 2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.board.whiteDeadPieces);\n  }\n}\nexport let BoardComponent = /*#__PURE__*/(() => {\n  class BoardComponent {\n    constructor(socket) {\n      this.socket = socket;\n      this.boardId = 0;\n      this.board = this.socket.boards ? [this.boardId] : new Board(this.boardId, new Player('jugador1', new Team('team1')), new Player('jugador2', new Team('team2')));\n      const team1 = new Team('team1');\n      const team2 = new Team('team2');\n      this.board = new Board(1, new Player('jugador1', team1), new Player('jugador2', team2));\n      this.board.setPiecesPositions();\n    }\n    ngOnInit() {\n      if (this.reverse) {\n        this.board.cells.reverse();\n        this.board.cells[1].reverse();\n        this.board.cells[8].reverse();\n      }\n    }\n    drop(event) {\n      var _a, _b, _c, _d;\n      console.log(event);\n      const prev = event.previousContainer.data;\n      const curr = event.container.data;\n      if (event.previousContainer === event.container) {\n        console.log('Same container');\n      } else {\n        console.log('Moving piece');\n        if (curr.hasPiece) {\n          console.log('Cell has piece');\n          if (((_a = curr.piece) === null || _a === void 0 ? void 0 : _a.color) === ((_b = prev.piece) === null || _b === void 0 ? void 0 : _b.color)) {\n            console.log('Same color');\n            return;\n          } else {\n            console.log('Different color');\n            if (((_c = curr.piece) === null || _c === void 0 ? void 0 : _c.color) === 'White') {\n              console.log('Killing White Piece');\n              this.board.whiteDeadPieces.push(curr.piece);\n              console.log(this.board.whiteDeadPieces);\n            } else if (((_d = curr.piece) === null || _d === void 0 ? void 0 : _d.color) === 'Black') {\n              console.log('Killing Black Piece');\n              this.board.blackDeadPieces.push(curr.piece);\n              console.log(this.board.blackDeadPieces);\n            }\n          }\n        }\n        curr.setPiece(prev.piece);\n        prev.removePiece();\n      }\n    }\n    move(from, to) {\n      var _a, _b;\n      const prev = from;\n      const curr = to;\n      console.log('Moving piece');\n      if (curr.hasPiece) {\n        console.log('Cell has piece');\n        if (((_a = curr.piece) === null || _a === void 0 ? void 0 : _a.color) === 'White') {\n          console.log('Killing White Piece');\n          this.board.whiteDeadPieces.push(curr.piece);\n          console.log(this.board.whiteDeadPieces);\n        } else if (((_b = curr.piece) === null || _b === void 0 ? void 0 : _b.color) === 'Black') {\n          console.log('Killing Black Piece');\n          this.board.blackDeadPieces.push(curr.piece);\n          console.log(this.board.blackDeadPieces);\n        }\n      }\n      curr.setPiece(prev.piece);\n      prev.removePiece();\n    }\n  }\n  BoardComponent.ɵfac = function BoardComponent_Factory(t) {\n    return new (t || BoardComponent)(i0.ɵɵdirectiveInject(i1.SocketService));\n  };\n  BoardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BoardComponent,\n    selectors: [[\"app-board\"]],\n    inputs: {\n      reverse: \"reverse\",\n      boardId: \"boardId\"\n    },\n    decls: 6,\n    vars: 6,\n    consts: [[\"class\", \"dead\", 4, \"ngIf\"], [\"cdkDropListGroup\", \"\", 1, \"chess\", 3, \"ngClass\"], [4, \"ngFor\", \"ngForOf\"], [1, \"dead\"], [3, \"src\"], [\"cdkDropList\", \"\", 3, \"ngClass\", \"cdkDropListData\", \"cdkDropListDropped\", 4, \"ngFor\", \"ngForOf\"], [\"cdkDropList\", \"\", 3, \"ngClass\", \"cdkDropListData\", \"cdkDropListDropped\"], [\"cdkDrag\", \"\", 4, \"ngIf\"], [\"class\", \"border\", 4, \"ngIf\"], [\"cdkDrag\", \"\"], [\"cdkDragBoundary\", \".chess\", \"cdkDrag\", \"\", 3, \"src\"], [1, \"border\"]],\n    template: function BoardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, BoardComponent_table_0_Template, 2, 1, \"table\", 0);\n        i0.ɵɵtemplate(1, BoardComponent_table_1_Template, 2, 1, \"table\", 0);\n        i0.ɵɵelementStart(2, \"table\", 1);\n        i0.ɵɵtemplate(3, BoardComponent_tr_3_Template, 2, 1, \"tr\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, BoardComponent_table_4_Template, 2, 1, \"table\", 0);\n        i0.ɵɵtemplate(5, BoardComponent_table_5_Template, 2, 1, \"table\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.board.whiteDeadPieces.length > 0 && !ctx.reverse);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.board.blackDeadPieces.length > 0 && ctx.reverse);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", ctx.reverse ? \"reverse\" : \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.board.cells);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.board.blackDeadPieces.length > 0 && !ctx.reverse);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.board.whiteDeadPieces.length > 0 && ctx.reverse);\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i3.CdkDropList, i3.CdkDropListGroup, i3.CdkDrag],\n    styles: [\"table[_ngcontent-%COMP%]{border-collapse:collapse}td[_ngcontent-%COMP%]{padding:5px;width:50px;height:50px;text-align:center}img[_ngcontent-%COMP%]{width:100%;height:100%}.chess[_ngcontent-%COMP%]{margin-left:2%;margin-top:2%;margin-bottom:2%}.chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%], .chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{height:25px;border:1px solid black!important;background-color:gray!important}.chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:none;margin:0}.chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child, .chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{width:25px;border:1px solid black!important;background-color:gray!important}.chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child   p[_ngcontent-%COMP%], .chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   p[_ngcontent-%COMP%]{background:none;margin:0}.chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(even)   td[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#66443a}.chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(even)   [_ngcontent-%COMP%]:nth-of-type(even){background-color:#f5e6bf}.chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd)   td[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#f5e6bf}.chess[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd)   td[_ngcontent-%COMP%]:nth-of-type(even){background-color:#66443a}.disable[_ngcontent-%COMP%]{pointer-events:none}.dead[_ngcontent-%COMP%]{margin-left:2%;display:flex;flex-wrap:wrap;border:1px solid red}\"]\n  });\n  return BoardComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}